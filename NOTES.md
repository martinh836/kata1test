# Notes

Some thoughts before I get started.

My first thought, although not explicit in the specification, is that discounts can be applied or removed at various times, and the applicable productDiscount may change over time. E.g. this week Baked Beans are "10% off" and next week they are "buy two, get one" free. Also, as is stated, a range of discounts may apply at a given time, e.g. all vegetables on the same productDiscount. So I think that there can be a type of productDiscount, a collection of current offers and a linkage between these and the individual products. Further, pricing for a product may be better modelled away from the product itself allowing for grouping of individual items as with a 4-pack versus an individual can. I'll assume only one Discount applies on a Product at any one time.

So we would have a new type, DiscountCategory, specifying the class of productDiscount, such as price reduction or multi-buy. This would be linked via a new Discount type encapsulating the intersection between the DiscountCategory and one or more products. I would envisage that the DiscountCategory would further link to some rules such as specifying the number of items in a multi-buy; I won't try to flesh that one out as yet! In order to calculate the productDiscount on a Basket, an iteration would need to be applied on the collection of Items in the Basket, drilling to the Item's Product and hence to any Discount on the Product. This can then be totted up. Consideration of multibuys would be needed there both to find the required number of items in the basket and to ensure the productDiscount isn't applied too many times.

A more complete calculator could overcome some of the multi buy issues by creating new objects shadowing the static Discount framework that build up as the calculation progresses. I guess when an item is added to a basket that would be when a check for multibuys or "so many per pound" could be performed and the productDiscount set up there and then.
